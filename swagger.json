{"produces":["application/json"],"swagger":"2.0","info":{"description":"Spécification des web services utilisés par la synchronisation agenda.\nVoici la description des web services qui seront nécessaires à la communication entre les appareils clients *iPhone* et les serveurs *Aviva*.","version":"1.4.0","title":"Synchronisation agenda","termsOfService":"http://helloreverb.com/terms/","contact":{"name":"samuel_grau@aviva.fr"},"license":{"name":"Apache 2.0","url":"http://www.apache.org/licenses/LICENSE-2.0.html"}},"host":"prex.aviva-partenaires.com","basePath":"/pinspection/app/synchroagenda","schemes":["https"],"paths":{"/user/login":{"post":{"tags":["user"],"summary":"Authentifie l'utilisateur auprès du système","description":"","operationId":"loginUser","parameters":[{"in":"body","name":"body","description":"Le login et le mot de passe de l'utilisateur (non chiffré car sur connexion SSL)","required":true,"type":"string","schema":{"$ref":"#/definitions/UserCredentials"}}],"responses":{"200":{"description":"Opération réalisée avec succès","schema":{"$ref":"#/definitions/User"}},"403":{"description":"Echec d'authentification ou accès bloqué à une zone protégée"},"400":{"description":"Les paramètres de la requête sont invalides et le serveur n'a pas compris la syntaxe de la requête."}}}},"/user/logout":{"get":{"tags":["user"],"summary":"Déconnecte l'utilisateur","description":"Cette opération déconnecte l'utilisateur du système. Cela implique que toute opération nécessitant d'être connecté n'est plus possible tant qu'une nouvelle connexion n'a pas été rétablie.\n\nAinsi, quelque soit le mode d'authentification utilisé par le serveur, le service assure que la plupart des autres services requérant une authentification, retournerons une erreur 401.","operationId":"logoutUser","produces":["application/json"],"responses":{"200":{"description":"Opération réalisée avec succès"}}}},"/user/list":{"get":{"tags":["user"],"summary":"Retourne la liste de tous les utilisateurs du système, aussi bien les courtiers que les agents.","description":"La recherche permet de trouver des utilisateurs.\nLes utilisateurs retournés doivent **impérativement** être retournés **triés de manière croissante par l'identifiant en base de données**. ","operationId":"user_list","produces":["application/json"],"responses":{"200":{"description":"Opération réalisée avec succès","schema":{"type":"array","items":{"$ref":"#/definitions/User"}}},"403":{"description":"Echec d'authentification ou accès bloqué à une zone protégée"}}}},"/user/{userID}":{"get":{"tags":["user"],"summary":"Retourne l'utilisateur du système","description":"Obtention d,un utilisateur par son ID","operationId":"user_get","produces":["application/json"],"responses":{"200":{"description":"Opération réalisée avec succès","schema":{"$ref":"#/definitions/User"}},"400":{"description":"L'identifiant fournit est invalide"},"404":{"description":"Aucun événement correspondant n'a été trouvé"},"403":{"description":"Echec d'authentification ou accès bloqué à une zone protégée"}}}},"/event/list":{"post":{"tags":["event"],"summary":"Retourne une liste d'événements","description":"","operationId":"event_list","produces":["application/json"],"responses":{"200":{"description":"Opération réalisée avec succès","schema":{"type":"array","items":{"$ref":"#/definitions/Event"}}},"403":{"description":"Echec d'authentification ou accès bloqué à une zone protégée"}},"parameters":[{"in":"body","name":"body","description":"Les informations de la plage horaire demandée","required":false,"type":"string","schema":{"$ref":"#/definitions/TimeSlotRequest"}}]}},"/event":{"put":{"tags":["event"],"summary":"Met à jour les valeurs d'un événement de calendrier","description":"","operationId":"event_update","produces":["application/json"],"parameters":[{"in":"body","name":"body","description":"Objet \"**Evénement**\" qui doit être ajouté en base de données","required":false,"schema":{"$ref":"#/definitions/Event"}}],"responses":{"405":{"description":"Exception lors de la validation de l'intégrité des données"},"404":{"description":"Evénement non trouvé."},"400":{"description":"Identifiant d'événement fourni invalide."},"403":{"description":"Echec d'authentification ou accès bloqué à une zone protégée"},"204":{"description":"Le serveur a bien reçu la requête mais n'a pas de données à retourner. Ce qui est une réponse normale qui précise le succès de la requête dans le cas d'une demande de mise à jour ou de suppression d'un élement. Autrement dit tout s'est déroulé correctement et plutôt que de retourner un body avec un contenu inutile qui dirait que tout s'est bien passé. Le code 204 se suffit à lui-même pour nous informer du succès de l'opération."}}},"post":{"/event/{eventID}":{"delete":{"tags":["event"],"summary":"Suppression d'un événement de calendrier","description":"","operationId":"event_delete","produces":["application/json"],"parameters":[{"name":"eventID","in":"path","description":"Identifiant de l'événement","required":true,"type":"integer","format":"int64"}],"responses":{"400":{"description":"L'identifiant fournit est invalide"},"404":{"description":"Aucun événement correspondant n'a été trouvé"},"204":{"description":"Le contenu a été supprimé avec succès. Le serveur a bien reçu la requête mais n'a pas de données à retourner. Ce qui est une réponse normale qui précise le succès de la requête dans le cas d'une demande de mise à jour ou de suppression d'un élement. Autrement dit tout s'est déroulé correctement et plutôt que de retourner un body avec un contenu inutile qui dirait que tout s'est bien passé. Le code 204 se suffit à lui-même pour nous informer du succès de l'opération.","schema":{"$ref":"#/definitions/Event"}},"403":{"description":"Echec d'authentification ou accès bloqué à une zone protégée"}}},"get":{"tags":["event"],"summary":"Retourne les informations détaillées de l'événement","description":"","operationId":"event_get","produces":["application/json"],"responses":{"400":{"description":"L'identifiant fournit est invalide"},"404":{"description":"Aucun événement correspondant n'a été trouvé"},"200":{"description":"Opération réalisée avec succès","schema":{"$ref":"#/definitions/Event"}},"403":{"description":"Echec d'authentification ou accès bloqué à une zone protégée"}},"parameters":[{"name":"eventID","in":"path","description":"Identifiant de l'événement","required":true,"type":"integer","format":"int64"}]}},"tags":["event"],"summary":"Création d'un événement de calendrier","description":"","operationId":"event_create","produces":["application/json"],"responses":{"200":{"description":"Opération réalisée avec succès","schema":{"$ref":"#/definitions/Event"}},"405":{"description":"Données en entrée invalides"},"403":{"description":"Echec d'authentification ou accès bloqué à une zone protégée"}},"parameters":[{"in":"body","name":"body","description":"Objet \"**Evénement**\" qui doit être ajouté en base de données","required":false,"schema":{"$ref":"#/definitions/Event"}}]}}},"definitions":{"UserCredentials":{"properties":{"username":{"type":"string","xml":{"name":"username"},"description":"Le login/nom d'utilisateur"},"password":{"type":"string","xml":{"name":"username"},"description":"Le mot de passe de l'utilisateur"}},"xml":{"name":"UserCredentials"},"required":["username","password"]},"User":{"properties":{"id":{"type":"integer","format":"int64","description":"Identifiant de l'utilisateur au sein du système côté serveur","id":"http://jsonschema.net/id","title":"ID Schema."},"firstName":{"type":"string","description":"Le prénom de l'utilisateur"},"lastName":{"type":"string","description":"Le nom de l'utilisateur"},"email":{"type":"string","description":"L'adresse e-mail de l'utilisateur"},"phone":{"type":"string","description":"Le numéro de téléphone de l'utilisateur"},"lastConnectionDate":{"type":"string","format":"date-time","description":"La date de dernière connexion de l'utilisateur sur son *iPhone*"},"codeRRI":{"type":"string","description":"Le code RRI de l'utilisateur si celui-ci en possède un, sinon vaut null"},"codeNUF":{"type":"string","description":"Le code NUF de l'utilisateur si celui-ci en possède un, sinon vaut null"},"codeLogin":{"type":"string","description":"Le code Unique de l'utilisateur si celui-ci en possède un, sinon vaut null"},"officeName":{"type":"string","description":"Le nom du cabinet s'il s'agit d'un cabinet, sinon vaut null"},"officeDepartment":{"type":"string","description":"Numéro du département du cabinet s'il s'agit d'un cabinet, sinon vaut null"}},"xml":{"name":"User"},"required":["id","lastConnectionDate","firstName","lastName"],"description":"Cette structure matérialise un utilisateur, qu'il s'agisse d'un agent ou d'un courtier."},"Event":{"properties":{"calendarEventId":{"type":"string","description":"Identifiant de l'événement au sein du calendrier de l'appareil"},"remoteEventId":{"type":"string","description":"Identifiant de l'événement au sein du système côté serveur"},"localEventId":{"type":"string","description":"Identifiant de l'événement au sein du client smartphone (stockage)"},"title":{"type":"string","description":"Objet du rendez-vous"},"place":{"type":"string","description":"Lieu du rendez-vous"},"startDate":{"type":"string","format":"date-time","description":"Date et heure de début de l'événement"},"endDate":{"type":"string","format":"date-time","description":"Date et heure de fin de l'événement"},"eventType":{"description":"Type d'événement","type":"integer"},"appointmentType":{"description":"Type de rendez-vous","id":"http://jsonschema.net/address/appointmentTypes","title":"AppointmentTypes schema.","name":"appointmentType","$ref":"#/definitions/AppointmentType","type":"array"},"userId":{"type":"string","description":"Identifiant de l'utilisateur auquel est rattaché l'événement"},"comment":{"type":"string","description":"Commentaire de l'utilisateur"}},"xml":{"name":"Event"},"required":["id","clientID","appointmentType","startDate","endDate","place","title"],"description":"Le champs `eventType` est particulier"},"AppointmentType":{"properties":{"code":{"type":"string","xml":{"name":"commercialAction"},"description":"Le code du libellé"},"checked":{"type":"boolean","xml":{"name":"commercialRelease"},"description":"Est-ce coché ?"}},"xml":{"name":"AppointmentType"},"required":["username","password"]},"TimeSlotRequest":{"properties":{"userID":{"type":"integer","xml":{"name":"userID"},"description":"Identifiant de l'utilisateur demandant une plage de rendez-vous","format":"int64"},"startDate":{"type":"string","format":"date-time","description":"La date de début de la plage voulue"},"endDate":{"type":"string","format":"date-time","description":"La date de fin de la plage voulue"}},"xml":{"name":"TimeSlotRequest"},"required":["username","password"]}},"consumes":["application/json"]}